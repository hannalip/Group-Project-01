<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="asset/style.css">
    <title>What do you want to eat?</title>
</head>

<body>

</div>
    <div class="product-filters">
        <ul class="mobile-product-filters vertical menu show-for-small-only" data-accordion-menu>
            <li>
                <a href="#">
                    <h1>What do you want to eat?</h1>
                </a>
                <ul class="vertical menu" data-accordion-menu>
                    <li class="product-filters-tab">
                        <a href="#">
                            <h2>How do you want to get it?</h2>
                        </a>
                        <div class="uk-margin">
                          <div class="uk-form-controls">
                              <select class="uk-select" id="form-stacked-select dineorpick">
                                <option></option>
                                  <option value="Dine In">Dine in</option>
                                  <option value="Pick Up">Pick Up</option>
                              </select>
                          </div>
                      </div>
                      <h2>Which meal type are you in the mood for??</h2>
                    </a>
                    <div class="uk-margin">
                      <div class="uk-form-controls">
                          <select class="uk-select meal-type" id="form-stacked-select meal-type">
                            <option></option>
                              <option value="Breakfast">Breakfast</option>
                              <option value="Lunch">Lunch</option>
                              <option value="Dinner">Dinner</option>
                          </select>
                      </div>
                  </div>
                    <li class="product-filters-tab">
                        <a href="#">
                            <h2>Which cuisine type?</h2>
                        </a>
                        <div class="uk-margin">
                          <div class="uk-form-controls">
                              <select class="uk-select cuisine" id="form-stacked-select cuisine">
                                <option></option>
                                  <option value="American">American</option>
                                  <option value="Asian">Asian</option>
                                  <option value="Bakery">Bakery</optionvalue="">
                                  <option value="Dessert">Dessert</option>
                                  <option value="Fast Food">Fast Food</option>
                                  <option value="Indian">Indian</option>
                                  <option value="Italian">Italian</option>
                                  <option value="Mexican">Mexican</option>
                                  <option value="Thai">Thai</option>
                                  <option value="Seafood">Seafood</option>
                                  <option value="Vegetarian">Vegetarian</option>
                              </select>
                          </div>
                      </div>
                    <li class="product-filters-tab">
                        <a href="#">
                            <h2>Whats your price point?</h2>
                        </a>
                        <div class="uk-margin">
                          <div class="uk-form-controls">
                              <select class="uk-select pricepoint" id="form-stacked-select pricepoint">
                                <option></option>
                                  <option value="$">$</option>
                                  <option value="$$">$$</option>
                                  <option value="$$$">$$$</optionvalue="">
                                  <option value="$$$$">$$$$</option>
                                  
                              </select>
                          </div>
                      </div>
        <p id="status"></p>
        <a id="map-link" target="_blank"></a>


        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                geoFindMe();
                // $("#find-city").on("click", function (event) {
                // 	event.preventDefault();
                // 	var zipcode = $("#zipcodeDiv").val();
                // 	$("#zipcode").val("");
                // 	getResturants(zipcode)
                // });
            });


            function geoFindMe() {

                const status = document.querySelector('#status');
                const mapLink = document.querySelector('#map-link');

                mapLink.href = '';
                mapLink.textContent = '';

                function success(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    console.log(latitude);
                    console.log(longitude);

                    status.textContent = '';
                    mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
                    // mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;
                    console.log(mapLink.textContent)
                    getResturants(longitude, latitude)
                }

                function error() {
                    status.textContent = 'Unable to retrieve your location';
                }

                if (!navigator.geolocation) {
                    status.textContent = 'Geolocation is not supported by your browser';
                } else {
                    status.textContent = 'Locating…';
                    navigator.geolocation.getCurrentPosition(success, error);
                }

            }

            function getResturants(longitude, latitude) {
                var usRestaurantMenus = {
                    "async": true,
                    "crossDomain": true,
                    "url": "https://us-restaurant-menus.p.rapidapi.com/restaurants/search/geo?page=1&lon=" + longitude + "&lat=" + latitude + "&distance=1",
                    "method": "GET",
                    "headers": {
                        "x-rapidapi-host": "us-restaurant-menus.p.rapidapi.com",
                        "x-rapidapi-key": "db19f6c31fmsh74ab69ea63379d5p187630jsn004e83353fc9"
                    }
                }
                $.ajax(usRestaurantMenus).done(function (response) {
                    console.log(response);
                });
            };
          }
          
          var mealType
          var cuisine
          var pricepoint


        </script>
</body>

</html>